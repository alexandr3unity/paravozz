<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
    <style>

           body {
            color:white;
            background-image: url('imej/fon.jpg');
            background-size: auto;
            background-position: center;
            background-repeat: repeat;
        }


        /* –ü–∞–Ω–µ–ª—å —Å –∫–Ω–æ–ø–∫–∞–º–∏ */
  .bottom-panel {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #808080; /* –°–µ—Ä—ã–π —Ñ–æ–Ω */
        display: flex;
        justify-content: space-around;
        padding: 10px 0; /* –£–≤–µ–ª–∏—á–µ–Ω –æ—Ç—Å—Ç—É–ø –ø–∞–Ω–µ–ª–∏ */
        z-index: 1000;
    }

    .bottom-panel a {
        text-decoration: none;
    }

    .bottom-panel button {
        color: #808080; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–æ–∫ –ø–æ–¥ —Ñ–æ–Ω */
        border: none;
        border-radius: 5px;
        padding: 10px 15px; /* –£–≤–µ–ª–∏—á–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –≤—ã—à–µ */
        font-size: 0.8em;
        cursor: pointer;
        transition: background-color 0.3s ease;
        display: flex;
        justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∏–∫–æ–Ω–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
        align-items: center;
        background-color: transparent; /* –£–±–∏—Ä–∞–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω */
    }

    .bottom-panel button:hover {
        background-color: #666666; /* –¢–µ–º–Ω–µ–µ —Å–µ—Ä—ã–π –¥–ª—è hover */
        color: white;
    }

    .bottom-panel button img {
        width: 25px; /* –£–≤–µ–ª–∏—á–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ */
        height: 25px;
    }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .button {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            margin-top: 10px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã */
        .pay-button {
            background-color: #28a745;
            color: white;
        }

        .pay-button:hover {
            background-color: #218838;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –ø–æ–∫—É–ø–∫–∞–º */
        .return-button {
            background-color: #007bff;
            color: white;
        }

        .return-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>

    
<body>


    <h1 style="text-align: center">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>
    <div class="cart-container">
        <!-- –ö–æ—Ä–∑–∏–Ω–∞ –±—É–¥–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é JavaScript -->
    </div>

    <p style="text-align: center"><strong>–ò—Ç–æ–≥–æ:</strong> <span id="total-price">0</span> —Ä—É–±.</p>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã -->
    <button type="button" class="pay-button button" onclick="checkout()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</button>

    <!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –ø–æ–∫—É–ø–∫–∞–º -->
    <button type="button" class="return-button button" onclick="window.location.href='https://alexandr3unity.github.io/paravozz/'">–í–æ–∑–≤—Ä–∞—Ç –∫ –ø–æ–∫—É–ø–∫–∞–º</button>





              <div class="bottom-panel">
    <a href="home.html">
        <button>
            <img src="imej/Ico/discount.png" > 
        </button>
    </a>
    <a href="search.html">
        <button>
              <img src="imej/Ico/about-us.png" > 
        </button>
    </a>
    <a href="index.html">
        <button>
            <img src="imej/Ico/home.png" > 
        </button>
    </a>
    <a href="cart.html">
        <button>
            <img src="imej/Ico/cart.png" >
        </button>
    </a>
    <a href="cart.html">
        <button>
            <img src="imej/Ico/star.png" > 
        </button>
    </a>


    
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
       function loadCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartContainer = document.querySelector('.cart-container');
            let totalPrice = 0;

            cartContainer.innerHTML = ''; // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

            cart.forEach(item => {
                totalPrice += item.price * item.quantity;
                cartContainer.innerHTML += `
                    <div class="cart-item">
                        <h2>${item.name}</h2>
                        <p><strong>–¶–µ–Ω–∞:</strong> ${item.price} —Ä—É–±.</p>
                        <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong>
                            <button class="quantity-btn" onclick="changeQuantity('${item.name}', 'decrease')">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn" onclick="changeQuantity('${item.name}', 'increase')">+</button>
                        </p>
                        <p><strong>–°—É–º–º–∞:</strong> ${item.price * item.quantity} —Ä—É–±.</p>
                        <button onclick="removeFromCart('${item.name}')">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
            });

            document.getElementById('total-price').textContent = totalPrice;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
        function changeQuantity(name, action) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const itemIndex = cart.findIndex(item => item.name === name);

            if (itemIndex > -1) {
                if (action === 'increase') {
                    cart[itemIndex].quantity += 1;
                } else if (action === 'decrease' && cart[itemIndex].quantity > 1) {
                    cart[itemIndex].quantity -= 1;
                }
            }

            localStorage.setItem('cart', JSON.stringify(cart)); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ localStorage
            loadCart(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
        function removeFromCart(name) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart = cart.filter(item => item.name !== name); // –£–¥–∞–ª—è–µ–º —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage)
        function checkout() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        if (cart.length === 0) {
            alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
            return;
        }

        const orderId = Math.floor(Math.random() * 1000000); // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞
        const paymentDate = new Date().toLocaleDateString();

        // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        let message = `üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!\n\nüìÖ –î–∞—Ç–∞: ${paymentDate}\nüÜî –ó–∞–∫–∞–∑ ‚Ññ${orderId}\n\nüì¶ –¢–æ–≤–∞—Ä—ã:`;
        cart.forEach(item => {
            message += `\n- ${item.name} (x${item.quantity})`;
        });

        // –¢–µ–ª–µ–≥—Ä–∞–º –¥–∞–Ω–Ω—ã–µ
        const token = '7791735203:AAFC1TzcCpkgjrvFASLyG5Vhw6X-gVEoHLg'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω
        const chatId = '771803609'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à chat ID
        const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
        fetch(url)
            .then(response => response.json())
            .then(data => {
                if (data.ok) {
                    alert('‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram!');
                    window.location.href = 'https://alexandr3unity.github.io/paravozz/payment_success';
                } else {
                    alert('‚ö† –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram!');
                }
            })
            .catch(error => {
                alert('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Telegram!');
                console.error(error);
            });
    }

            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
            window.location.href = 'https://alexandr3unity.github.io/paravozz/payment_success';
    
        }


        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadCart();

    
    
    </script>
</body>
</html>
